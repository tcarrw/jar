<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Illumina 1 â€” Moon Ã— Songs Ã— Seeds</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='46' fill='black'/><circle cx='40' cy='50' r='38' fill='white'/></svg>">
  <style>
    :root {
      --bg: #0b0b0c; --card: #141417; --text: #e9e9ef; --muted: #9a9aab; --accent: #b2f5ea; --ring: #2a2a33; --grid: rgba(255,255,255,0.06);
    }
    * { box-sizing: border-box; }
    html, body { margin:0; padding:0; background:var(--bg); color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, 'Noto Sans'; }
    header { position: sticky; top: 0; z-index: 10; backdrop-filter: saturate(1.1) blur(6px); background: linear-gradient(180deg, rgba(11,11,12,0.9), rgba(11,11,12,0.6)); border-bottom: 1px solid var(--ring); }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 16px; }
    h1 { margin: 0; font-size: clamp(20px, 2.6vw, 30px); letter-spacing: .2px; }
    .meta { color: var(--muted); font-size: 14px; margin-top: 4px; }
    .controls { display:flex; gap:12px; margin-top:12px; flex-wrap:wrap; }
    input[type="search"], select {
      background: var(--card); color: var(--text); border: 1px solid var(--ring); border-radius: 12px; padding: 10px 12px; outline: none; font-size: 14px; width: min(320px, 100%);
    }
    main .wrap { padding: 20px 16px 48px; }
    .legend-card { background: var(--card); border: 1px solid var(--ring); border-radius: 12px; padding: 12px; margin: 12px 0 16px; }
    .legend-grid { display:flex; flex-wrap:wrap; gap: 8px 10px; align-items:center; }
    .legend-title { font-size:12px; color: var(--muted); text-transform: uppercase; letter-spacing:.4px; margin-right: 8px; }
    .pill { display:inline-block; padding:4px 8px; border:1px solid var(--ring); border-radius:999px; color: var(--muted); font-size:12px; }
    .table-card { background: var(--card); border: 1px solid var(--ring); border-radius: 16px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,.35); }
    table { width: 100%; border-collapse: collapse; }
    thead th { text-align: left; font-weight: 600; font-size: 12px; letter-spacing:.4px; text-transform: uppercase; color: var(--muted); padding: 14px 12px; background: linear-gradient(180deg, rgba(255,255,255,.04), transparent); border-bottom: 1px solid var(--ring); }
    tbody td { padding: 14px 12px; border-bottom: 1px dashed var(--grid); vertical-align: top; }
    tbody tr:hover { background: rgba(255,255,255,0.03); }
    .c-day { width:60px; font-weight:700; }
    .c-date { width:170px; color: var(--muted); }
    .c-phase { width:170px; }
    .c-track { min-width:240px; }
    .c-figure { width:140px; color: var(--muted); }
    .c-seed { min-width:220px; }
    .c-url a { display:inline-block; padding:6px 10px; border:1px solid var(--ring); border-radius:10px; text-decoration:none; color:var(--text); }
    footer { color: var(--muted); font-size: 12px; text-align:center; padding: 28px 0; }
    @media (max-width: 820px) {
      thead { display: none; }
      tbody tr { display: grid; grid-template-columns: 1fr 1fr; gap: 0 12px; padding: 10px 10px; }
      tbody td { border-bottom: none; padding: 8px 6px; }
      tbody tr + tr { border-top: 1px solid var(--ring); }
      tbody td::before { content: attr(data-label); display:block; font-size: 11px; text-transform: uppercase; color: var(--muted); margin-bottom: 2px; }
      .c-day { grid-column: 1 / span 1; } .c-date { grid-column: 2 / span 1; } .c-phase { grid-column: 1 / span 2; } .c-track { grid-column: 1 / span 2; } .c-figure { grid-column: 1 / span 1; } .c-seed { grid-column: 2 / span 1; } .c-url { grid-column: 1 / span 2; }
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Illumina 1 â€” Moon Ã— Songs Ã— Seeds</h1>
      <div class="meta">Dates: 2025-11-05 â†’ 2025-12-17 â€¢ 42-day cycle</div>
      <div class="controls">
        <input id="q" type="search" placeholder="Filter by track, figure, seed, or phaseâ€¦" aria-label="Filter" />
        <select id="phase">
          <option value="">All moon phases</option>
          <option>ðŸŒ• Full Moon</option><option>ðŸŒ– Waning Gibbous</option><option>ðŸŒ— Last Quarter</option><option>ðŸŒ˜ Waning Crescent</option>
          <option>ðŸŒ‘ New Moon</option><option>ðŸŒ’ Waxing Crescent</option><option>ðŸŒ“ First Quarter</option><option>ðŸŒ” Waxing Gibbous</option>
        </select>
      </div>
          <div class="meta"><a href="https://youtube.com/playlist?list=PL2H7n7qLAdf7VTOrmFlY9G-PaE94VrHAY&si=vblXKmAvTj-Ve5iV" target="_blank">Playlist â†—</a></div>
    </div>
  </header>
  <main>
    <div class="wrap">
      <div class="legend-card" aria-label="Seed cadence legend">
        <div class="legend-grid">
          <span class="legend-title">Seed cadence:</span>
          <span class="pill">1 Cosmic Apple â€” swallow</span>
          <span class="pill">2 Pumpkin â€” chew + honey</span>
          <span class="pill">3 Mustard â€” swallow</span>
          <span class="pill">4 Cumin â€” chew + honey (smoke optional)</span>
          <span class="pill">5 Gala Apple â€” chew</span>
          <span class="pill">6 Pumpkin â€” swallow</span>
          <span class="pill">7 Royal Orange â€” swallow + honey</span>
        </div>
      </div>

      <div class="table-card">
        <table id="tbl">
          <thead>
            <tr>
              <th>Day</th><th>Date</th><th>Moon</th><th>Track</th><th>Figure</th><th>Seed Ritual</th><th>Link</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
    </div>
  </main>
  <footer>Â© jar.plnt.earth</footer>

  <script>
    const DATA_URL = "/data/illumina1.json";
    function norm(s){ return (s||'').toLowerCase(); }
    function buildRow(d){
      const a = d.URL ? `<a href="${d.URL}" target="_blank" rel="noopener">Open</a>` : '<span class="muted">â€”</span>';
      return `<tr data-phase="${d.MoonPhase}">
        <td class="c-day" data-label="Day">${d.Day}</td>
        <td class="c-date" data-label="Date">${d.Date}</td>
        <td class="c-phase" data-label="Moon">${d.MoonPhase}</td>
        <td class="c-track" data-label="Track">${d.Track}</td>
        <td class="c-figure" data-label="Figure">${d.Figure || ""}</td>
        <td class="c-seed" data-label="Seed Ritual">${d.SeedRitual || ""}</td>
        <td class="c-url" data-label="Link">${a}</td>
      </tr>`;
    }
    function matches(row, text, phase){
      const hay = norm(row.textContent);
      const okText = !text || hay.indexOf(norm(text)) !== -1;
      const okPhase = !phase || row.getAttribute('data-phase') === phase;
      return okText && okPhase;
    }
    async function boot(){
      try{
        const res = await fetch(DATA_URL);
        const data = await res.json();
        const rows = data.sort((a,b)=>a.Day-b.Day).map(buildRow).join("");
        const tbody = document.getElementById("rows");
        tbody.innerHTML = rows;

        const q = document.getElementById('q');
        const phaseSel = document.getElementById('phase');
        function apply(){
          const text = q.value; const phase = phaseSel.value;
          const all = tbody.querySelectorAll('tr');
          all.forEach(tr => { tr.style.display = matches(tr, text, phase) ? '' : 'none'; });
        }
        q.addEventListener('input', apply);
        phaseSel.addEventListener('change', apply);
      }catch(e){
        document.getElementById("rows").innerHTML = "<tr><td colspan='7'>Error loading data.</td></tr>";
      }
    }
    boot();
  </script>
</body>
</html>
