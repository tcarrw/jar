<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üåï Illumina 1 ‚Äî Watchmen Overlay Calendar (Jar)</title>
  <meta name="description" content="Jar calendar with Watchmen overlays wired to Moon Notes, plus links to tunes, interludes, archive/seeds, build docs, and science (1/7)."/>

  <!-- Link map (exact live URLs) -->
  <script id="jar-links-config" type="application/json">
  {
    "jarHome": "/",
    "tunes": "https://tunes.plnt.earth/",
    "interludes": {
      "sabrina": "/interludes/sabrina/",
      "janet": "/interludes/janet-planet/",
      "doechii": "/interludes/doechii/",
      "emma": "/interludes/emma-stone/",
      "h2g": "/interludes/hot-to-go/",
      "eminem": "/interludes/eminem/"
    },
    "archive": "/archive/",
    "seeds": "/reference/seeds/",
    "build": "/build/",
    "science_1_7": "/science/time-1-7/"
  }
  </script>

  <style>
    body{margin:0;font-family:ui-sans-serif,system-ui;background:#0a0a0f;color:#e7f6ff;line-height:1.5}
    header{position:sticky;top:0;z-index:10;padding:14px 18px;display:flex;gap:12px;align-items:center;background:linear-gradient(180deg,rgba(5,6,10,.95),rgba(5,6,10,.82));border-bottom:1px solid rgba(255,255,255,.08)}
    .brand{font-weight:800;letter-spacing:.3px}
    .nav{margin-left:auto;display:flex;gap:10px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:6px;padding:8px 14px;border-radius:999px;border:1px solid rgba(0,240,255,.35);background:rgba(0,240,255,.08);color:#e7f6ff;text-decoration:none;font-size:14px}
    .btn:hover{box-shadow:0 6px 18px rgba(0,240,255,.15)}

    h1{text-align:center;padding:20px 10px;font-size:clamp(24px,4vw,42px)}
    table{border-collapse:collapse;width:100%;max-width:1100px;margin:0 auto 30px;background:#0e0e14;border:1px solid rgba(255,255,255,.08);border-radius:12px;overflow:hidden}
    th,td{padding:12px 14px;text-align:center;border:1px solid rgba(255,255,255,.08)}
    th{background:#101018;color:#00f0ff;font-weight:700}
    tr:nth-child(even){background:rgba(255,255,255,.02)}
    .anchor{font-weight:700}
    .watchmen{display:block;font-size:14px;color:#98a2b3;margin-top:4px}
    .aphex{color:#00f0ff}
    .bon{color:#ff3df2}
    .mosq{color:#3dff9b}
    caption{caption-side:top;padding:10px;font-size:18px;color:#ffd166}

    .daychips{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin-top:6px}
    .chip{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:8px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.04);font-size:12px;color:#e7f6ff;text-decoration:none}
    .chip:hover{box-shadow:0 6px 16px rgba(0,240,255,.15)}

    section.notes{max-width:1100px;margin:0 auto 40px;padding:20px;background:#0e0e14;border:1px solid rgba(255,255,255,.08);border-radius:12px}
    section.notes h2{margin-top:0;font-size:1.2rem}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:8px}
    label{font-size:14px;color:#98a2b3}
    input,select,textarea{background:#0f1420;color:#e7f6ff;border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:10px 12px;font:inherit}
    textarea{width:100%;min-height:120px;resize:vertical}
    .controls{margin-top:10px;display:flex;gap:10px;flex-wrap:wrap}
    .controls .btn{font-size:13px;padding:6px 12px}
    #savedNotes{margin-top:16px;font-size:14px;color:#98a2b3}
    .pulse{box-shadow:0 0 0 2px rgba(0,240,255,.35) inset;animation:pulse 1.2s ease-out 2}
    @keyframes pulse{to{box-shadow:0 0 0 12px rgba(0,240,255,0)}}
  </style>
</head>
<body>
  <header>
    <div class="brand">Jar ¬∑ Constellation</div>
    <nav class="nav">
      <a class="btn" id="navJar">Jar Index</a>
      <a class="btn" id="navTunes">Tunes</a>
      <a class="btn" id="navArchive">Archive</a>
      <a class="btn" id="navSeeds">Seeds</a>
      <a class="btn" id="navBuild">Build</a>
      <a class="btn" id="navScience">Science 1/7</a>
    </nav>
  </header>

  <h1>üåï Illumina 1 ‚Äî Watchmen Overlay Calendar</h1>
  <table>
    <caption>Nov 5 ‚Äì Dec 17, 2025</caption>
    <thead>
      <tr><th>Week</th><th>Days</th><th>Theme</th><th>Anchor</th><th>Watchmen Overlay</th></tr>
    </thead>
    <tbody>
      <tr id="day1">
        <td>1</td>
        <td>
          Nov 5‚Äì11<br>(Days 1‚Äì7)
          <div class="daychips" data-range="1-7"></div>
        </td>
        <td>Honey ignition</td>
        <td class="anchor"><a class="bon" data-interlude="sabrina">üçØ Sabrina</a></td>
        <td></td>
      </tr>
      <tr id="day8">
        <td>2</td>
        <td>
          Nov 12‚Äì18<br>(Days 8‚Äì14)
          <div class="daychips" data-range="8-14"></div>
        </td>
        <td>Curiosity / Telescope</td>
        <td class="anchor"><a class="bon" data-interlude="janet">üåô Janet Planet</a></td>
        <td>
          <a href="#notes" class="bon overlay-link" data-days="10,11">‚ùÑÔ∏è Bon Iver</a>
          <span class="watchmen">Day 10‚Äì11 ‚Äî Winter reflection</span>
        </td>
      </tr>
      <tr id="day15">
        <td>3</td>
        <td>
          Nov 19‚Äì25<br>(Days 15‚Äì21)
          <div class="daychips" data-range="15-21"></div>
        </td>
        <td>Chaos calibration</td>
        <td class="anchor"><a class="aphex" data-interlude="doechii">üî• Doechii</a></td>
        <td>
          <a href="#notes" class="aphex overlay-link" data-days="18,19">üéß Aphex Twin</a>
          <span class="watchmen">Day 18‚Äì19 ‚Äî Alien disruption</span>
        </td>
      </tr>
      <tr id="day22">
        <td>4</td>
        <td>
          Nov 26‚ÄìDec 2<br>(Days 22‚Äì28)
          <div class="daychips" data-range="22-28"></div>
        </td>
        <td>Identity spotlight</td>
        <td class="anchor"><a class="bon" data-interlude="emma">‚òÄÔ∏è Emma Stone</a></td>
        <td>
          <a href="#notes" class="mosq overlay-link" data-days="28">ü¶ü Mosquito</a>
          <span class="watchmen">Day 28 ‚Äî Micro-trickster spark</span>
        </td>
      </tr>
      <tr id="day29">
        <td>5</td>
        <td>
          Dec 3‚Äì9<br>(Days 29‚Äì35)
          <div class="daychips" data-range="29-35"></div>
        </td>
        <td>Collective joy</td>
        <td class="anchor"><a class="bon" data-interlude="h2g">üêù Hot To Go!</a></td>
        <td></td>
      </tr>
      <tr id="day36">
        <td>6</td>
        <td>
          Dec 10‚Äì17<br>(Days 36‚Äì42)
          <div class="daychips" data-range="36-42"></div>
        </td>
        <td>Victory Song</td>
        <td class="anchor"><a class="aphex" data-interlude="eminem">‚ö° Eminem</a></td>
        <td>
          <a href="#notes" class="aphex overlay-link" data-days="39">üéß Aphex Twin</a>
          <span class="watchmen">Optional echo ‚Äî counterpoint</span>
        </td>
      </tr>
    </tbody>
  </table>

  <section class="notes" id="notes">
    <h2>Moon Notes</h2>
    <div class="row">
      <label for="dayInput">Day #</label>
      <input id="dayInput" type="number" min="1" max="42" step="1" style="width:90px" />
      <a class="btn" id="toInterlude">Back to Interlude</a>
    </div>
    <p>Write and save your Moon notes here. Saved locally in your browser.</p>
    <textarea id="moonNote" placeholder="Write your Moon note‚Ä¶"></textarea>
    <div class="controls">
      <button class="btn" id="save">Save</button>
      <button class="btn" id="clear">Clear</button>
      <a class="btn" id="toTunes">Open Tunes</a>
      <a class="btn" id="toArchive">Open Archive</a>
      <a class="btn" id="toSeeds">Open Seeds</a>
      <a class="btn" id="toBuild">Build Docs</a>
      <a class="btn" id="toScience">Science 1/7</a>
    </div>
    <div id="savedNotes"></div>
  </section>

  <footer style="text-align:center;font-size:14px;color:#98a2b3;margin-bottom:30px">Jar ‚Ä¢ Illumina Constellation Overlay</footer>

  <script>
    (function(){
      // Link map
      var cfg = {};
      try { cfg = JSON.parse(document.getElementById('jar-links-config').textContent || '{}'); } catch(e) {}
      function setHref(id, url){ var el = document.getElementById(id); if(el && url){ el.href = url; if(url.startsWith('http')){ el.target = '_blank'; el.rel = 'noopener'; } } }
      setHref('navJar', cfg.jarHome || '/');
      setHref('navTunes', cfg.tunes || 'https://tunes.plnt.earth/');
      setHref('navArchive', cfg.archive || '/archive/');
      setHref('navSeeds', cfg.seeds || '/reference/seeds/');
      setHref('navBuild', cfg.build || '/build/');
      setHref('navScience', cfg.science_1_7 || '/science/time-1-7/');
      setHref('toTunes', cfg.tunes);
      setHref('toArchive', cfg.archive);
      setHref('toSeeds', cfg.seeds);
      setHref('toBuild', cfg.build);
      setHref('toScience', cfg.science_1_7);

      // Interlude links in the Anchor column
      document.querySelectorAll('[data-interlude]').forEach(function(a){
        var key = a.getAttribute('data-interlude');
        var url = (cfg.interludes || {})[key] || '';
        if(url){ a.href = url; if(url.startsWith('http')){ a.target = '_blank'; a.rel = 'noopener'; } }
      });

      // Day chips ‚Üí generate links ?day=X#notes
      function makeChips(el){
        var range = (el.getAttribute('data-range')||'').split('-').map(function(n){return parseInt(n,10)});
        if(range.length!==2) return;
        var s = range[0], e = range[1];
        for(var d=s; d<=e; d++){
          var a = document.createElement('a');
          a.className='chip'; a.textContent=String(d);
          a.href='?day='+d+'#notes';
          el.appendChild(a);
        }
      }
      document.querySelectorAll('.daychips').forEach(makeChips);

      // Notes persistence (per-day) ‚Äî simple localStorage array
      var LS_KEY = 'jar_constellation_moon_notes';
      var ta = document.getElementById('moonNote');
      var saveBtn = document.getElementById('save');
      var clearBtn = document.getElementById('clear');
      var savedDiv = document.getElementById('savedNotes');
      var dayInput = document.getElementById('dayInput');
      var backBtn = document.getElementById('toInterlude');

      function load(){ try{return JSON.parse(localStorage.getItem(LS_KEY)||'[]');}catch(e){return [];} }
      function saveAll(rows){ localStorage.setItem(LS_KEY, JSON.stringify(rows)); }
      function render(){ var rows = load(); var last=rows[rows.length-1]; savedDiv.textContent = last?('Last saved: Day '+(last.day||'?')+' ‚Äî '+(last.note||'')):'No Moon note saved yet.'; }

      function anchorKeyForDay(d){
        if(!d) return '';
        if(d>=1 && d<=7) return 'sabrina';
        if(d>=8 && d<=14) return 'janet';
        if(d>=15 && d<=21) return 'doechii';
        if(d>=22 && d<=28) return 'emma';
        if(d>=29 && d<=35) return 'h2g';
        if(d>=36 && d<=42) return 'eminem';
        return '';
      }
      function updateBackLink(){
        var d = parseInt(dayInput.value||'',10);
        var key = anchorKeyForDay(d);
        var url = key ? (cfg.interludes||{})[key] : '';
        backBtn.style.display = url ? '' : 'none';
        if(url){ backBtn.href = url; }
      }

      function onSave(){
        var rows=load();
        var r={ day: parseInt(dayInput.value,10)||'', note: ta.value };
        var idx=rows.findIndex(function(x){return x.day===r.day;});
        if(idx>=0) rows[idx]=r; else rows.push(r);
        saveAll(rows); render(); updateBackLink();
      }
      function onClear(){ ta.value=''; dayInput.value=''; updateBackLink(); }

      function focusNotes(d){ dayInput.value=d||''; updateBackLink(); document.getElementById('notes').scrollIntoView({behavior:'smooth'}); ta.classList.remove('pulse'); void ta.offsetWidth; ta.classList.add('pulse'); }

      document.querySelectorAll('.overlay-link').forEach(function(a){ a.addEventListener('click', function(){ var days=(a.getAttribute('data-days')||'').split(','); focusNotes(days[0]); }); });

      // Support deep links ?day=18#notes
      (function(){ var p=new URLSearchParams(location.search); var d=parseInt(p.get('day')||'',10); if(d){ focusNotes(d); } })();

      dayInput.addEventListener('input', updateBackLink);
      saveBtn.addEventListener('click',onSave);
      clearBtn.addEventListener('click',onClear);
      render(); updateBackLink();
    })();
  </script>
</body>
</html>
