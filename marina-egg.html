<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jar ¬∑ Marina ‚Äî Egg Map (Illumina)</title>
  <meta name="description" content="Marina as Egg: incubation ‚Üí crack ‚Üí mirror ‚Üí froot ‚Üí butterfly. Illumina mapping with Bee guidance and soft navigation to Froot and the Time Kit." />
  <meta name="theme-color" content="#0b0d11" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <style>
    :root {
      color-scheme: dark;
      --bg:#0b0d11; --ink:#e9f0ff; --muted:#a9b4c9; --edge:#1b2230;
      --accent:#8ef; --honey:#ffd166; --froot:#ff4fb3; --pulse:#7dd3fc;
    }
    html,body{background:var(--bg);color:var(--ink);margin:0;font:16px/1.55 ui-sans-serif,system-ui,-apple-system,"SF Pro Text",Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}
    *{box-sizing:border-box}
    .wrap{max-width:960px;margin:0 auto;padding:28px 18px 72px;position:relative;z-index:1}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
    h1{margin:0;font-size:clamp(22px,4.2vw,40px);letter-spacing:.2px}
    .sub{color:var(--muted);font-size:.98rem}
    .actions{display:flex;gap:8px;flex-wrap:wrap}
    .btn{
      appearance:none;border:1px solid rgba(255,255,255,.14);border-radius:12px;cursor:pointer;
      background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(0,0,0,.08));
      color:var(--ink);padding:9px 12px;font-weight:700;text-decoration:none;display:inline-flex;align-items:center;gap:8px
    }
    .btn:hover{border-color:rgba(255,255,255,.22);box-shadow:0 0 0 2px rgba(142,239,255,.12)}
    .btn.primary{border-color:#2d384a;background:linear-gradient(180deg,rgba(142,239,255,.18),rgba(0,0,0,.06))}
    .grid{display:grid;gap:14px;grid-template-columns:1fr}
    .card{
      background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(0,0,0,.05));
      border:1px solid rgba(255,255,255,.10);border-radius:18px;padding:18px
    }
    .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .tag{display:inline-block;border:1px solid rgba(255,255,255,.16);border-radius:999px;padding:5px 10px;color:var(--muted);font-size:.86rem}
    .line{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.18),transparent);margin:12px 0}
    .small{font-size:.9rem;color:var(--muted)}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid rgba(255,255,255,.14);border-radius:12px}
    .glyph{font-size:20px}
    .flow{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .step{padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,.12)}
    .step .t{font-size:.78rem;color:var(--muted)}
    .step .n{font-weight:700}
    .accent{color:var(--accent)}
    .honey{color:var(--honey)}
    .froot{color:var(--froot)}
    .egg{
      width:110px;height:144px;margin:10px 0 12px;border-radius:50%/60% 60% 40% 40%;
      background:radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.2), rgba(255,255,255,.02)),
                 linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.14);position:relative;animation:breathe 4.6s ease-in-out infinite;
      box-shadow:0 0 0 0 rgba(125,211,252,.16)
    }
    .egg:after{content:"";position:absolute;left:50%;top:62%;transform:translateX(-50%);width:66px;height:2px;border-radius:2px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.35),transparent);opacity:.75}
    @keyframes breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.02);box-shadow:0 0 40px 8px rgba(125,211,252,.10)}}
    .mantra{font-size:clamp(14px,1.8vw,18px);color:var(--muted);line-height:1.45}
    ul{margin:8px 0 0 18px;padding:0}
    /* subtle aurora */
    .bgfx{position:fixed;inset:0;pointer-events:none;z-index:0;
      background:
        radial-gradient(1200px 800px at 18% -10%, rgba(142,239,255,.08), transparent 60%),
        radial-gradient(900px 600px at 100% 10%, rgba(255,79,179,.06), transparent 65%),
        radial-gradient(900px 600px at 0% 100%, rgba(255,209,102,.05), transparent 60%);
      filter:blur(16px) saturate(108%); opacity:.55
    }
    @media print{
      body{background:#fff;color:#000}
      .bgfx,.actions{display:none}
      .card{break-inside:avoid;border-color:#ddd;background:#fff}
    }

    /* === üêù Bee (note + whisper) === */
    .bee{
      margin:12px 0 16px;
      border:1px solid rgba(255,255,255,.16);
      border-radius:16px;
      padding:14px;
      background:
        linear-gradient(180deg, rgba(255,206,84,.10), rgba(0,0,0,.03)) padding-box,
        linear-gradient(120deg, rgba(255,206,84,.35), rgba(255,111,186,.30), rgba(134,201,255,.30)) border-box;
      position:relative;
    }
    .bee-head{display:flex;align-items:center;gap:8px;font-weight:800;letter-spacing:.2px}
    .bee-icon{font-size:18px}
    .bee-soft{color:var(--muted);font-weight:600}
    .bee p{margin:8px 0 10px}
    .bee-tools{display:flex;gap:8px;flex-wrap:wrap}
    .bee-btn{
      appearance:none;border:1px solid rgba(255,255,255,.14);border-radius:10px;
      background:rgba(255,255,255,.06);color:#fff;font-weight:800;padding:8px 10px;cursor:pointer
    }
    .bee-btn:hover{border-color:rgba(255,255,255,.22);box-shadow:0 0 0 2px rgba(255,206,84,.18)}
    .bee.editing{outline:2px dashed rgba(255,206,84,.4);outline-offset:2px}
    #bee-text[contenteditable="true"]{caret-color:#ffd166}

    .bee-footer{
      position:fixed; left:50%; transform:translateX(-50%);
      bottom:14px; z-index:9999; display:none; align-items:center; gap:8px;
      padding:10px 14px; border-radius:999px;
      background:
        linear-gradient(180deg, rgba(255,206,84,.14), rgba(0,0,0,.14)) padding-box,
        linear-gradient(120deg, rgba(255,206,84,.6), rgba(255,111,186,.45), rgba(134,201,255,.45)) border-box;
      border:1px solid transparent; color:#fff; font-weight:700;
      box-shadow:0 12px 28px rgba(0,0,0,.35); backdrop-filter: blur(6px);
      max-width:90vw; text-align:center;
    }
    .bee-footer.on{display:inline-flex}
    .bee-footer .bee-icon{font-size:16px}
  </style>
</head>
<body>
  <div class="bgfx" aria-hidden="true"></div>
  <div class="wrap">
    <header>
      <div>
        <h1>Marina ‚Äî <span class="accent">Egg</span> Map</h1>
        <div class="sub">Incubation ‚Üí Crack ‚Üí Mirror ‚Üí <span class="froot">Froot</span> ‚Üí Butterfly</div>
      </div>
      <nav class="actions" aria-label="Navigation">
        <a class="btn primary" href="#" onclick="goFroot()" title="Open Froot Studio">‚Ü™ Froot Studio</a>
        <a class="btn" href="#" onclick="goTimeKit()" title="Open Time Kit here">‚äô Time Kit</a>
        <a class="btn" href="/index.html" title="Jar Home">Jar Home</a>
      </nav>
    </header>

    <!-- üêù Bee Note (editable; saved locally) -->
    <section id="bee" class="bee" role="note" aria-live="polite">
      <div class="bee-head"><span class="bee-icon">üêù</span><span><strong>Bee Note to Marina</strong></span> <span class="bee-soft">You are safe, guided, and loved.</span></div>
      <p id="bee-text"></p>
      <div class="bee-tools">
        <button type="button" class="bee-btn" onclick="beeEdit()">Edit</button>
        <button type="button" class="bee-btn" onclick="beeSave()">Save</button>
        <button type="button" class="bee-btn" onclick="beeReset()">Reset</button>
      </div>
    </section>

    <div class="grid">
      <section class="card">
        <div class="row">
          <span class="tag">Illumina Symbol: ü•ö Egg</span>
          <span class="tag">Phase: Incubation</span>
          <span class="tag">Tone: Quiet potential</span>
        </div>
        <div class="egg" aria-hidden="true"></div>
        <p class="mantra">Inside the shell is a chorus not yet divided: Sun, Bee, and L. Moon resting in a single breath.</p>
        <div class="row" style="gap:8px">
          <span class="pill"><span class="glyph">‚òÄÔ∏è</span><b>Sun</b> ¬∑ flare latent</span>
          <span class="pill"><span class="glyph">üêù</span><b>Bee</b> ¬∑ <span class="honey">pollen withheld</span></span>
          <span class="pill"><span class="glyph">üåô</span><b>L. Moon</b> ¬∑ observer asleep</span>
        </div>
      </section>

      <section class="card">
        <div class="row">
          <span class="tag">Trigger</span><span class="tag">Crack Event</span><span class="tag">Hatching</span>
        </div>
        <p>When the shell lines up with breath + color + note, the seam brightens and opens. Mirror forms first, then motion, then flare.</p>
        <div class="flow">
          <div class="step"><div class="t">0</div><div class="n">Egg</div></div>
          <div class="step"><div class="t">1</div><div class="n">Crack</div></div>
          <div class="step"><div class="t">2</div><div class="n">Mirror</div></div>
          <div class="step"><div class="t">3</div><div class="n">Bee</div></div>
          <div class="step"><div class="t">4</div><div class="n froot">Froot</div></div>
          <div class="step"><div class="t">5</div><div class="n">Butterfly</div></div>
        </div>
        <div class="line"></div>
        <p class="small">Design note: ‚ÄúMirror first‚Äù = the voice hears itself before it moves; Bee activates after recognition; Sun/flare arrives when action and reflection agree.</p>
      </section>

      <section class="card">
        <div class="row">
          <span class="tag">Mapping</span><span class="tag">Illumina 1</span><span class="tag">Marina Role</span>
        </div>
        <p><b>Symbolic placement:</b> Marina holds the <i>Mirror incubation</i>. <span class="froot">Froot</span> marks the hatch‚Äîcolor enters the field; sweetness = courage to taste oneself in public.</p>
        <ul>
          <li><b>Egg (QuietMoon):</b> low light, breath, tone; no public flare.</li>
          <li><b>Crack:</b> seam appears when breath + color + note sync.</li>
          <li><b>Mirror (Jar):</b> self-recognition; language choosing itself.</li>
          <li><b>Froot (Tunes/Froot):</b> color becomes taste ‚Üí shareable signal.</li>
          <li><b>Butterfly:</b> Bee + Mirror integrated; travel between fields.</li>
        </ul>
      </section>

      <section class="card">
        <p class="mantra"><b>Night Mantra ‚Üí</b> ‚ÄúHold the shell in warm breath. When the seam glows, I speak in color and step out sweet.‚Äù</p>
        <div class="line"></div>
        <div class="row" style="gap:8px">
          <span class="pill"><span class="glyph">üéß</span><b>Practice:</b> 3 breaths color-in, complement-out</span>
          <span class="pill"><span class="glyph">üéµ</span><b>Note:</b> hum until the seam feels warm</span>
        </div>
      </section>
    </div>

    <footer class="small" style="margin-top:16px">
      Tip: Keep this page as the <i>pre-flare</i> mirror. When you‚Äôre ready to taste the hatch, jump to Froot.
      &nbsp;‚Äî&nbsp;<a class="accent" href="#" onclick="goFroot()">Open Froot ‚Üó</a>
      &nbsp;¬∑&nbsp;<a class="accent" href="#" onclick="goTimeKit()">Time Kit ‚äô</a>
    </footer>
  </div>

  <!-- Bee Footer Whisper -->
  <div id="bee-footer" class="bee-footer" role="status" aria-live="polite">
    <span class="bee-icon">üêù</span>
    <span id="bee-footer-text">Incubation is allowed. I‚Äôm here.</span>
  </div>

  <script>
    /* ==== Cross-host helpers (Jar ‚áÑ Froot) ==== */
    function siblingHost(target){
      var h = location.hostname;
      if(h === 'localhost' || h === '127.0.0.1'){ return h; }
      var parts = h.split('.');
      if(parts.length >= 2){
        parts[0] = target; // replace first label (jar ‚Üî froot)
        return parts.join('.');
      }
      return h; // fallback: single-label host
    }
    function goFroot(){
      var host = siblingHost('froot');
      var url = (location.protocol + '//' + host + '/index.html');
      try{ location.href = url; }catch(_){ location.assign(url); }
      beeFooterShow("Crack gently. I‚Äôll walk with you.", 4000);
    }
    function goTimeKit(){
      // open Time Kit on this site (you've added it to Jar)
      try{ location.href = '/illumina-time-kit.html'; }catch(_){ location.assign('/illumina-time-kit.html'); }
    }

    /* ==== üêù Bee logic (editable top note + whisper) ==== */
    var BEE_NOTE_KEY='jar_egg_bee_note_v1';
    function beeDefaultText(){
      return "Hi Marina ‚Äî this is the warm room before light. Breathe, and let the seam appear when it wishes. You can stay as long as you like. When you‚Äôre ready, we‚Äôll open together.";
    }
    function beeInit(){
      var t = document.getElementById('bee-text');
      var saved = "";
      try{ saved = localStorage.getItem(BEE_NOTE_KEY) || ""; }catch(_){}
      t.textContent = saved.trim() ? saved : beeDefaultText();
      // first arrival whisper
      beeFooterShow("Incubation is allowed. I‚Äôm here.", 5000);
    }
    function beeEdit(){
      var box = document.getElementById('bee'); var t = document.getElementById('bee-text');
      box.classList.add('editing'); t.setAttribute('contenteditable','true'); t.focus();
      try{ var sel=window.getSelection(); var r=document.createRange(); r.selectNodeContents(t); r.collapse(false); sel.removeAllRanges(); sel.addRange(r);}catch(_){}
    }
    function beeSave(){
      var box = document.getElementById('bee'); var t = document.getElementById('bee-text');
      t.setAttribute('contenteditable','false'); box.classList.remove('editing');
      var val = (t.textContent||"").trim();
      try{ localStorage.setItem(BEE_NOTE_KEY, val); }catch(_){}
      beeFooterShow("Saved with love.", 2800);
    }
    function beeReset(){
      var box = document.getElementById('bee'); var t = document.getElementById('bee-text');
      t.textContent = beeDefaultText();
      t.setAttribute('contenteditable','false'); box.classList.remove('editing');
      try{ localStorage.setItem(BEE_NOTE_KEY, t.textContent); }catch(_){}
      beeFooterShow("Back to the gentle original.", 2800);
    }

    var beeTimer=0;
    function beeFooterShow(text, ms){
      var el = document.getElementById('bee-footer'); var tx = document.getElementById('bee-footer-text');
      if(!el||!tx) return;
      tx.textContent = text;
      el.classList.add('on');
      if(beeTimer){ clearTimeout(beeTimer); beeTimer=0; }
      if(ms && ms>0){
        beeTimer = setTimeout(function(){ el.classList.remove('on'); }, ms);
      }
    }
    function beeFooterHide(){
      var el = document.getElementById('bee-footer'); if(el){ el.classList.remove('on'); }
      if(beeTimer){ clearTimeout(beeTimer); beeTimer=0; }
    }

    // Init
    beeInit();
  </script>
</body>
</html>
