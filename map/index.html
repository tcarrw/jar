<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>PLNT Constellation Map</title>
<meta name="description" content="A living constellation of PLNT.earth tracks orbiting Jar, with Illumina timeline tags.">
<style>
  :root{
    --bg:#0B0F19;--ink:#E6EAF2;--muted:#94A3B8;--line:rgba(255,255,255,.12);
    --card:#0F1524;--accent:#A4E8FF;--ok:#34D399;--tbd:#FBBF24;
    --shadow:0 16px 40px rgba(0,0,0,.35);--hi: rgba(164,232,255,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--ink);font:15px/1.55 ui-sans-serif,system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial}
  a{color:inherit;text-decoration:none}
  .wrap{max-width:1200px;margin:0 auto;padding:28px}
  header{display:flex;align-items:baseline;gap:10px;flex-wrap:wrap}
  h1{font-size:28px;margin:0;letter-spacing:.2px}
  .sub{color:var(--muted)}
  .controls{margin-left:auto;display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .select,.btn{appearance:none;background:var(--card);color:var(--ink);border:1px solid var(--line);border-radius:10px;padding:8px 12px;font-size:14px}
  .btn{cursor:pointer}
  .legend{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0 4px;align-items:center}
  .legend .badge{border:1px solid var(--line)}
  .chip-note{font-size:12px;color:var(--muted)}
  .group{margin:22px 0 10px;color:#BBD7FF;font-weight:700;font-size:12px;letter-spacing:.08em;text-transform:uppercase}
  .grid{display:grid;gap:14px;grid-template-columns:repeat(4,minmax(0,1fr))}
  @media (max-width:1024px){ .grid{grid-template-columns:repeat(3,minmax(0,1fr));} }
  @media (max-width:768px){  .grid{grid-template-columns:repeat(2,minmax(0,1fr));} }
  @media (max-width:520px){  .grid{grid-template-columns:repeat(1,minmax(0,1fr));} }
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.02), transparent 40%), var(--card);
    border:1px solid var(--line);border-radius:16px;padding:14px 14px 54px;position:relative;
    transition:transform .2s ease, box-shadow .2s ease, border-color .2s ease, opacity .2s ease;
    overflow:hidden; isolation:isolate; min-height:138px;
  }
  .card:hover{transform:translateY(-3px);box-shadow:var(--shadow);border-color:var(--hi)}
  .row{display:flex;align-items:center;gap:10px}
  .emoji{font-size:22px;line-height:1}
  .title{font-weight:750;letter-spacing:.2px}
  .tag{margin-top:4px;font-size:11px;padding:4px 8px;border-radius:999px;border:1px solid var(--line);color:var(--muted);display:inline-block}
  .url{margin-top:10px;font-family:ui-monospace,Menlo,Consolas,monospace;color:var(--muted);font-size:12px;word-break:break-all;opacity:.85}
  .badges{position:absolute;top:10px;right:10px;display:flex;gap:6px;flex-wrap:wrap;max-width:70%}
  .badge{font-size:10px;padding:3px 7px;border-radius:999px;white-space:nowrap}
  .live{background:rgba(52,211,153,.15);color:var(--ok);border:1px solid rgba(52,211,153,.35)}
  .tbd{background:rgba(251,191,36,.12);color:var(--tbd);border:1px solid rgba(251,191,36,.35)}
  .i-chip{background:rgba(164,232,255,.10);color:#C8F1FF;border:1px solid var(--hi);display:none}
  .legend .i-chip{display:inline-block}
  body.filtering .i-chip{display:inline-block}
  .desc{
    position:absolute;left:0;right:0;bottom:0;padding:10px 14px 12px;
    background:linear-gradient(0deg, rgba(10,14,24,.9), rgba(10,14,24,.0));
    color:#D7E6FF;font-size:12.5px;line-height:1.4;opacity:0;transform:translateY(8px);
    transition:opacity .18s ease, transform .18s ease;border-top:1px solid rgba(255,255,255,.06)
  }
  .card:hover .desc{opacity:1;transform:translateY(0)}
  .note{color:var(--muted);font-size:13px;margin-top:18px}
  hr{border:none;border-top:1px solid var(--line);margin:24px 0}
  .match{border-color:var(--hi); box-shadow:0 0 0 1px var(--hi) inset;}
  .dim{opacity:.55}
  .coreBadge{position:fixed;left:8px;bottom:8px;font-size:12px;color:var(--muted);background:#0f1218;border:1px solid var(--line);padding:6px 8px;border-radius:10px;z-index:2147483645}
  .sigil{position:fixed;right:12px;bottom:8px;opacity:.25;font-size:20px;user-select:none;pointer-events:none;z-index:2147483645}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>PLNT Constellation Map</h1>
    <span class="sub">Jar is the hub ‚Äî explore the tracks that orbit it.</span>
    <div class="controls">
      <label for="ill" class="sub">Highlight by Illumina:</label>
      <select id="ill" class="select" aria-label="Highlight by Illumina">
        <option value="all">All (no highlight)</option>
        <option value="1">Illumina 1</option><option value="2">Illumina 2</option>
        <option value="3">Illumina 3</option><option value="4">Illumina 4</option>
        <option value="5">Illumina 5</option><option value="6">Illumina 6</option>
        <option value="7">Illumina 7</option><option value="8">Illumina 8</option>
        <option value="9">Illumina 9</option><option value="10">Illumina 10</option>
        <option value="11">Illumina 11</option><option value="12">Illumina 12</option>
        <option value="13">Illumina 13</option><option value="14">Illumina 14</option>
      </select>
      <button id="refreshLive" class="btn" aria-label="Refresh live status">Refresh live status</button>
    </div>
  </header>

  <div class="legend">
    <span class="badge live">Live</span>
    <span class="badge tbd">TBD (placeholder)</span>
    <span class="badge i-chip">Appears in selected Illumina</span>
    <span class="chip-note">üíÑ Neon Prophet signal tags Bridge‚Äôs lane.</span>
  </div>

  <div class="group">Core Hub</div>
  <div class="grid" id="core"></div>

  <div class="group">Primary Tracks</div>
  <div class="grid" id="primary"></div>

  <div class="group">Secondary / Narrative</div>
  <div class="grid" id="secondary"></div>

  <div class="group">Future / TBD</div>
  <div class="grid" id="future"></div>

  <hr>
  <p class="note">
    Pages marked <b>TBD</b> are storyboarded but not linked yet. Hover cards for short descriptions.
    Use the dropdown to highlight which sites surface in each Illumina‚Äôs theme arc.
    Placeholders auto-promote to <b>Live</b> as soon as each domain resolves.
  </p>
</div>

<script>
/* ===== Data (edit here) =====
   exists:false = Coming Soon placeholder; it will auto-promote to Live when the domain resolves.
   ills = array of Illumina numbers (1..14) for timeline highlighting.
*/
const CORE = [
  {name:"Jar (hub)", emoji:"üçØ", url:"https://jar.plnt.earth", exists:true, tag:"ritual ‚Ä¢ archive",
   desc:"The honeycomb. Days, seeds, interludes, and cycle archives ‚Äî everything flows back here.", ills:[1,2,3,4,5,6,7,8,9,10,11,12,13,14]},
  {name:"MirrorHoney", emoji:"ü™û", url:"https://mirrorhoney.plnt.earth", exists:true, tag:"closeness ‚Ä¢ 128 Hz",
   desc:"Gentle resonance and steadiness. Marina anchor with Honey tone.", ills:[1,6,11]},
  {name:"Honey", emoji:"üêù", url:"https://honey.plnt.earth", exists:true, tag:"taste ‚Ä¢ notes",
   desc:"Taste log + explainer ‚Äî the Bee in the Illumina triad.", ills:[1,5,11]},
  {name:"Tunes", emoji:"üé∂", url:"https://tunes.plnt.earth", exists:true, tag:"playlist",
   desc:"Music engine for cycles ‚Äî anchors, interludes, and overlays.", ills:[1,5,11]}
];

const PRIMARY = [
  {name:"Time", emoji:"‚è≥", url:"https://time.plnt.earth", exists:true, tag:"physics",
   desc:"Equations & constants. Public fits, visuals, and forecasts tied to Illumina.", ills:[2,12]},
  {name:"Zeta", emoji:"üåÄ", url:"https://zeta.plnt.earth", exists:true, tag:"math ‚Ä¢ infinity",
   desc:"Counting games ‚Üí formal proofs. Experimental math & visuals on infinity.", ills:[6,9,12]},
  {name:"Books", emoji:"üìö", url:"https://books.plnt.earth", exists:false, tag:"Dua ‚Ä¢ gate",
   desc:"Dua curates shelves, canon ordering, and featured reels.", ills:[7,11]},
  {name:"Atlas", emoji:"ü™ê", url:"https://atlas.plnt.earth", exists:false, tag:"Janet ‚Ä¢ explains",
   desc:"Janet Planet‚Äôs sourced info cards + read-aloud voice.", ills:[6,10,12]},
  {name:"Earth", emoji:"üåç", url:"https://earth.plnt.earth", exists:false, tag:"Greta ‚Ä¢ conscience",
   desc:"Sustainability pledges, cycle tracker, Echo Mode grounding.", ills:[6,11,12]},
  {name:"Bridge", emoji:"üåâ", url:"https://bridge.plnt.earth", exists:false, tag:"Doechii ‚Ä¢ üíÑ",
   desc:"Trickster / Catalyst: disruption prompts & pattern breaks.", ills:[5,11,14]},
  {name:"Movies", emoji:"üé¨", url:"https://movies.plnt.earth", exists:false, tag:"Emma ‚Ä¢ voice",
   desc:"Roles & Reels ‚Äî scene builder + voiceover presets.", ills:[9,13]},
  {name:"DNA", emoji:"üß¨", url:"https://dna.plnt.earth", exists:true, tag:"biology",
   desc:"Replication, growth, and living systems as Illumina mirrors.", ills:[3,8]},
  {name:"Intelligence", emoji:"üß†", url:"https://intelligence.plnt.earth", exists:true, tag:"ai ‚Ä¢ cognition",
   desc:"Thinking about thinking. Human/AI co-creation, cognition experiments.", ills:[4,10]},
  {name:"42", emoji:"‚ùñ", url:"https://42.plnt.earth", exists:true, tag:"meta",
   desc:"Meaning of 42. Meta-layer tying cycles, science, and culture.", ills:[7,9,13]},
  {name:"Lighthouse", emoji:"üóº", url:"https://lighthouse.plnt.earth", exists:true, tag:"guidance",
   desc:"Signal vs noise. Navigation notes, heuristics, and gentle beacons.", ills:[7,10]},
  {name:"Boiled Peanuts", emoji:"ü•ú", url:"https://boiledpeanuts.plnt.earth", exists:true, tag:"culture ‚Ä¢ play",
   desc:"Playful ritual & taste anchor ‚Äî southern snack as cultural spark.", ills:[5,11]},
  {name:"Beacon", emoji:"üì°", url:"https://tunes.plnt.earth/beacon/index.html", exists:true, tag:"signal ‚Ä¢ ECC",
   desc:"Signal spec, 31/47 headers, ECC, and the Decoder Lab.", ills:[1,7,13]}
];

const SECONDARY = [
  {name:"Big Bang", emoji:"üí•", url:"https://bigbang.plnt.earth", exists:true, tag:"origin",
   desc:"Genesis page. First sparks, origin notes, and cosmology metaphors.", ills:[1,8]},
  {name:"Brain", emoji:"üß©", url:"https://brain.plnt.earth", exists:true, tag:"mind map",
   desc:"Scratchpad of ideas ‚Äî nodes that later become full tracks.", ills:[2,10]},
  {name:"Constellation", emoji:"‚ú®", url:"https://constellation.plnt.earth", exists:true, tag:"map",
   desc:"Alternate star map / experiments in layout.", ills:[1,7,13]},
  {name:"Dimensions", emoji:"üìê", url:"https://dimensions.plnt.earth", exists:true, tag:"space ‚Ä¢ scale",
   desc:"How size, scale, and perspective change meaning.", ills:[6,12]},
  {name:"Heat Death", emoji:"üßä", url:"https://heatdeath.plnt.earth", exists:true, tag:"limits",
   desc:"Far-future metaphors. What happens when the lights go out.", ills:[12,13]},
  {name:"Hello World", emoji:"üëã", url:"https://helloworld.plnt.earth", exists:true, tag:"onboarding",
   desc:"Start here. A soft hello for new explorers.", ills:[1]},
  {name:"Illumina", emoji:"üåï", url:"https://illumina.plnt.earth", exists:true, tag:"cycles",
   desc:"The 42-day lunar rhythm. Anchors, interludes, and archives.", ills:[1,7,13]},
  {name:"Manifold Dynamics", emoji:"üß≠", url:"https://manifolddynamics.plnt.earth", exists:true, tag:"flows",
   desc:"Flows on curved spaces. Gentle dynamical systems playground.", ills:[10,12]},
  {name:"Predictions", emoji:"üìà", url:"https://predictions.plnt.earth", exists:true, tag:"forecasts",
   desc:"Timestamped forecasts, calibration charts, and scoring (log-loss, Brier).", ills:[2,10,12]},
  {name:"Return", emoji:"‚Ü©Ô∏è", url:"https://return.plnt.earth", exists:true, tag:"recurrence",
   desc:"Recurrence & closure ‚Äî where cycles loop back and feed forward.", ills:[7,13]},
  {name:"Rock", emoji:"ü™®", url:"https://rock.plnt.earth", exists:true, tag:"ground",
   desc:"Wayfinding & real-world anchors (NYC pins, meetups).", ills:[11]},
  {name:"Save Cooper", emoji:"üöÄ", url:"https://savecooper.plnt.earth", exists:true, tag:"myth ‚Ä¢ story",
   desc:"Narrative arc: rescue the explorer. A mythic thread.", ills:[9,13]},
  {name:"Storage", emoji:"üóÑÔ∏è", url:"https://storage.plnt.earth", exists:true, tag:"assets",
   desc:"Public assets & datasets ‚Äî the static file store for PLNT (read-only).", ills:[1,8]},
  {name:"Time (alt)", emoji:"‚è±Ô∏è", url:"https://time.plnt.earth", exists:true, tag:"physics (mirror)",
   desc:"Mirror link in case visitors discover it here first.", ills:[2,12]},
  {name:"Travel", emoji:"‚úàÔ∏è", url:"https://travel.plnt.earth", exists:true, tag:"journey",
   desc:"Journeys literal and symbolic ‚Äî field notes, routes, and time-dilations.", ills:[9,11]},
  {name:"Tunes (alt)", emoji:"üéß", url:"https://tunes.plnt.earth", exists:true, tag:"music (mirror)",
   desc:"Mirror link ‚Äî quick jump back to the player.", ills:[1,11]},
  {name:"Virus", emoji:"üß¨", url:"https://virus.plnt.earth", exists:true, tag:"memes",
   desc:"How ideas spread; memetics and culture drift.", ills:[11]},
  {name:"Weight Loss", emoji:"‚öñÔ∏è", url:"https://weightloss.plnt.earth", exists:true, tag:"health",
   desc:"Protocols and experiments around body metrics.", ills:[8]}
];

const FUTURE = [
  {name:"Fire", emoji:"üî•", url:"https://fire.plnt.earth", exists:false, tag:"tbd",
   desc:"Transformation, energy, risk ‚Äî a second-orbit anchor in waiting.", ills:[14]},
  {name:"Mycelium", emoji:"üçÑ", url:"https://mycelium.plnt.earth", exists:false, tag:"tbd",
   desc:"Hidden networks, collaboration, and underground exchange.", ills:[14]},
  {name:"Aether", emoji:"üí®", url:"https://aether.plnt.earth", exists:false, tag:"tbd",
   desc:"Unseen fields. Breath, space between, subtle mediums.", ills:[14]},
  {name:"QuietMoon", emoji:"üåô", url:"https://quietmoon.plnt.earth", exists:false, tag:"tbd",
   desc:"Ultra-soft sanctuary page for calm sessions and safe nights.", ills:[11,14]},
  {name:"Ocean", emoji:"üåä", url:"https://ocean.plnt.earth", exists:false, tag:"tbd",
   desc:"Depth, flow, tides, and planetary time.", ills:[14]},
  {name:"Echo", emoji:"üìº", url:"https://echo.plnt.earth", exists:false, tag:"tbd",
   desc:"Memory & resonance ‚Äî how signals persist across cycles.", ills:[14]}
];

/* ===== Render ===== */
function el(tag, cls, text){ const n=document.createElement(tag); if(cls)n.className=cls; if(text!=null)n.textContent=text; return n; }
function chipIll(n){ const s=el('span','badge i-chip',`I${n}`); s.dataset.ill=n; return s; }

function card(item){
  const clickable=item.exists;
  const root=document.createElement(clickable?'a':'div');
  if(clickable){ root.href=item.url; root.target="_blank"; root.rel="noopener"; }
  root.className='card';
  root.dataset.ills=(item.ills||[]).join(',');
  if(!item.exists){ root.dataset.placeholder='true'; root.dataset.url=item.url; }

  const badges=el('div','badges');
  const liveBadge=el('span','badge '+(item.exists?'live':'tbd'), item.exists?'Live':'TBD');
  badges.appendChild(liveBadge);
  (item.ills||[]).slice(0,3).forEach(n => badges.appendChild(chipIll(n)));

  const row=el('div','row');
  row.appendChild(el('div','emoji',item.emoji));
  row.appendChild(el('div','title',item.name));

  const tag=el('div','tag',item.tag);
  const url=el('div','url',item.url);
  const desc=el('div','desc',item.desc||'');

  root.appendChild(badges);
  root.appendChild(row);
  root.appendChild(tag);
  root.appendChild(url);
  if(item.desc) root.appendChild(desc);
  return root;
}

function mount(list,id){
  const root=document.getElementById(id);
  list.forEach(x => root.appendChild(card(x)));
}

mount(CORE,'core');
mount(PRIMARY,'primary');
mount(SECONDARY,'secondary');
mount(FUTURE,'future');

/* ===== Illumina Highlight Filter ===== */
const sel=document.getElementById('ill');
sel.addEventListener('change',()=>{
  document.body.classList.toggle('filtering', sel.value!=='all');
  const v=sel.value;
  const allCards=[].slice.call(document.querySelectorAll('.card'));
  if(v==='all'){ allCards.forEach(c=>{c.classList.remove('match','dim')}); return; }
  allCards.forEach(c=>{
    const arr=(c.dataset.ills||'').split(',').filter(Boolean);
    const isMatch=arr.includes(v);
    c.classList.toggle('match',isMatch);
    c.classList.toggle('dim',!isMatch);
  });
});

/* ===== Auto ‚ÄúComing Soon‚Äù ‚Üí Live (cross-domain live check) =====
   We HEAD-fetch each placeholder URL with no-cors. If it resolves at all, we promote it:
   - Flip badge to Live
   - Convert the card into a link
   - Remove placeholder flags
*/
function promoteToLive(node){
  node.removeAttribute('data-placeholder');
  const url=node.dataset.url; if(url){ node.removeAttribute('data-url'); node.outerHTML = node.outerHTML; } // normalize
  // Rebuild as link (simplest): replace node with clickable <a> that keeps children
  const a=document.createElement('a');
  a.className=node.className; a.href=url; a.target="_blank"; a.rel="noopener";
  a.dataset.ills=node.dataset.ills||"";
  a.innerHTML=node.innerHTML;
  const badge=a.querySelector('.badge.tbd'); if(badge){ badge.classList.remove('tbd'); badge.classList.add('live'); badge.textContent='Live'; }
  node.replaceWith(a);
}

function checkLive(url){
  try{
    return fetch(url, {method:'HEAD', mode:'no-cors', cache:'no-store'}).then(()=>true).catch(()=>false);
  }catch(e){ return Promise.resolve(false); }
}
function sweepPlaceholders(){
  const placeholders=[].slice.call(document.querySelectorAll('[data-placeholder="true"]'));
  if(!placeholders.length){ return; }
  placeholders.forEach(function(node){
    const u=node.dataset.url; if(!u){ return; }
    checkLive(u).then(function(live){
      if(live){ promoteToLive(node); }
    });
  });
}
document.getElementById('refreshLive').addEventListener('click',sweepPlaceholders);
document.addEventListener('DOMContentLoaded',sweepPlaceholders);

/* ===== Core badge + üíÑ sigil ===== */
(function(){
  var C={domain:"jar",governedBy:"Jar (Hub)",tier:"Map"};
  var badge=document.createElement('div');
  badge.className='coreBadge';
  badge.textContent=(function(){var who=C.governedBy||"";var tier=C.tier||"";var dn=C.domain||location.hostname.split(".")[0];return who?("Governed by: "+who+(tier?(" ("+tier+")"):"")):("PLNT Earth ¬∑ "+dn)})();
  document.body.appendChild(badge);
  var sig=document.createElement('div');
  sig.className='sigil'; sig.setAttribute('aria-hidden','true'); sig.textContent='üíÑ';
  document.body.appendChild(sig);
})();
</script>
</body>
</html>
