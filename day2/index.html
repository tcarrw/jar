<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Illumina 2 — Two-Page Day Spread</title>
<style>
:root{--bg:#fff;--ink:#111;--soft:#e9e9e9;--gold:#caa100;--orange:#ff8a00;--grey:#7a7a7a}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
.header{display:flex;gap:10px;align-items:center;justify-content:center;padding:14px;border-bottom:1px solid var(--soft);position:sticky;top:0;background:#fff;z-index:2}
.header .btn{border:1px solid var(--soft);padding:8px 12px;border-radius:12px;background:#fff;cursor:pointer}
.header .btn:disabled{opacity:.4;cursor:not-allowed}
.header .title{font-weight:700}
.header select{border:1px solid var(--soft);border-radius:10px;padding:8px 10px;background:#fff}
.grid{max-width:1200px;margin:18px auto;padding:0 18px}
.spread{display:grid;grid-template-columns:1fr 1fr;gap:20px;position:relative}
.page{border:1px solid var(--soft);border-radius:18px;padding:18px;min-height:72vh;position:relative;box-shadow:0 6px 30px rgba(0,0,0,.04);background:#fff}
.fold{position:absolute;left:calc(50% - 1px);top:0;width:2px;height:100%;background:repeating-linear-gradient(#bbb 0 8px,transparent 8px 16px);opacity:.35}
.hint{font-size:12px;opacity:.7;text-align:center;margin:10px 0}
.h1{font-size:18px;font-weight:800;margin:0 0 8px}
.sub{font-size:12px;opacity:.65;margin-bottom:12px}
.mantras{display:grid;gap:10px;margin-top:10px}
.mantras .card{border:1px solid var(--soft);border-radius:12px;padding:10px}
.label{font-size:12px;opacity:.7;margin-bottom:6px}
textarea,input[type="text"]{width:100%;border:1px solid var(--soft);border-radius:12px;padding:10px;min-height:100px;resize:vertical;font:inherit}
.small{min-height:auto}
.row{display:grid;gap:12px}
svg{width:100%;height:auto;display:block}
.meta{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:12px}
.controls{display:flex;gap:10px;justify-content:center;margin-top:10px}
.controls .btn{border:1px solid var(--soft);padding:8px 12px;border-radius:12px;background:#fff;cursor:pointer}
.badge{display:inline-block;border:1px solid var(--soft);border-radius:999px;padding:4px 10px;font-size:12px;margin-left:8px}
@media (max-width:900px){.spread{grid-template-columns:1fr}.fold{display:none}}
@media print{.header,.hint,.controls{display:none}.page{border:0;box-shadow:none}}
</style>
</head>
<body>
  <div class="header">
    <button id="prev" class="btn" aria-label="Previous Day">◀</button>
    <div class="title">Illumina 2 — Day <span id="dayLabel">1</span><span id="weekBadge" class="badge">Week 1</span></div>
    <select id="picker" aria-label="Jump to Day"></select>
    <button id="next" class="btn" aria-label="Next Day">▶</button>
    <a id="home" class="btn" href="../index2.html" aria-label="Illumina 2 Cover">Cover</a>
    <button id="print" class="btn" aria-label="Print This Day">Print</button>
  </div>

  <div class="grid">
    <div class="spread">
      <div class="fold" aria-hidden="true"></div>

      <!-- Left Page -->
      <section class="page" id="leftPage">
        <h2 class="h1">Triad • Pantheon • Watchmen</h2>
        <div class="sub">Illumina 2 compass. Same orbit; fresh season.</div>
        <!-- (Orbit SVG identical to Illumina 1 for continuity) -->
        <svg viewBox="0 0 800 800" role="img" aria-label="Illumina Orbit">
          <circle cx="400" cy="400" r="140" fill="none" stroke="var(--gold)" stroke-width="3" stroke-dasharray="6 8"/>
          <circle cx="400" cy="400" r="260" fill="none" stroke="var(--orange)" stroke-width="3" stroke-dasharray="6 8"/>
          <circle cx="400" cy="400" r="360" fill="none" stroke="var(--grey)" stroke-width="3" stroke-dasharray="6 8"/>
          <g fill="var(--gold)" stroke="var(--gold)" stroke-width="2">
            <circle cx="400" cy="300" r="8"/><circle cx="320" cy="480" r="8"/><circle cx="480" cy="480" r="8"/>
          </g>
          <path d="M400 300 L320 480 L480 480 Z" fill="none" stroke="var(--gold)" stroke-width="3"/>
          <text x="400" y="272" text-anchor="middle" font-size="12">☀️ Sun — Victory</text>
          <text x="320" y="506" text-anchor="middle" font-size="12">🐝 Bee — Honey</text>
          <text x="480" y="506" text-anchor="middle" font-size="12">🌙 Moon — Archive</text>
        </svg>

        <div class="mantras">
          <div class="card"><div class="label">☀️ Sun mantra</div><input id="sunMantra" type="text" class="small" placeholder="Victory cue (Cycle 2)"></div>
          <div class="card"><div class="label">🐝 Bee mantra</div><input id="beeMantra" type="text" class="small" placeholder="Honey focus (Cycle 2)"></div>
          <div class="card"><div class="label">🌙 Moon mantra</div><input id="moonMantra" type="text" class="small" placeholder="Archive cue (Cycle 2)"></div>
        </div>
      </section>

      <!-- Right Page -->
      <section class="page" id="rightPage">
        <h2 class="h1">Day Notes</h2>
        <div class="meta">
          <input id="dayTheme" type="text" class="small" placeholder="Theme / Title">
          <input id="dayDate"  type="text" class="small" placeholder="Date (auto)">
        </div>
        <div class="row">
          <div><div class="label">🌑 Weekly Intention (your words)</div><textarea id="intention"></textarea></div>
          <div><div class="label">🛠️ Midweek Offline Sprint — Offline Win</div><textarea id="offlineWin"></textarea></div>
          <div><div class="label">🌕 Weekly Close — One Win</div><textarea id="oneWin"></textarea></div>
          <div><div class="label">📜 Illumina Archive (continuity notes)</div><textarea id="archive"></textarea></div>
        </div>
        <div class="controls">
          <button class="btn" id="clearDay">Clear Day</button>
          <button class="btn" id="duplicatePrev">Duplicate From Previous Day</button>
        </div>
      </section>
    </div>
    <div class="hint">Use ◀ ▶ or the dropdown. Fields auto-save per day. Dates prefill for Illumina 2.</div>
  </div>

<script>
(function(){
  var TOTAL=42, day=1;
  var qs=function(id){return document.getElementById(id)};
  var fields=["sunMantra","beeMantra","moonMantra","dayTheme","dayDate","intention","offlineWin","oneWin","archive"];

  // ---- Date Map for Illumina 2 (Jan 3 → Feb 14, 2026) ----
  // Format: "Sat Jan 3, 2026" etc (UTC to avoid TZ drift)
  var dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
  var monNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
  var start = new Date(Date.UTC(2026,0,3)); // 2026-01-03
  var dates = [];
  for(var i=0;i<TOTAL;i++){
    var d=new Date(start.getTime()); d.setUTCDate(d.getUTCDate()+i);
    dates.push(dayNames[d.getUTCDay()]+" "+monNames[d.getUTCMonth()]+" "+d.getUTCDate()+", "+d.getUTCFullYear());
  }
  // --------------------------------------------------------

  function key(f){return "illumina2_day_"+day+"_"+f}
  function saveField(id){ localStorage.setItem(key(id), qs(id).value) }
  function loadField(id){
    var stored = localStorage.getItem(key(id));
    if(id==="dayDate"){
      qs(id).value = (stored!==null && stored!=="") ? stored : dates[day-1];
    }else{
      qs(id).value = stored || "";
    }
  }
  function loadAll(){ fields.forEach(loadField) }
  function bindSave(){ fields.forEach(function(id){ qs(id).oninput=function(){ saveField(id) } }) }
  function weekFor(d){ return "Week "+(Math.floor((d-1)/7)+1) }
  function updateHeader(){
    qs("dayLabel").textContent=day;
    qs("weekBadge").textContent=weekFor(day);
    qs("prev").disabled=(day===1);
    qs("next").disabled=(day===TOTAL);
    qs("picker").value=String(day);
  }
  function populatePicker(){
    var p=qs("picker");
    for(var i=1;i<=TOTAL;i++){
      var o=document.createElement("option");
      o.value=String(i);
      o.textContent="Day "+i+" — "+dates[i-1];
      p.appendChild(o);
    }
  }
  function goTo(d){ day=Math.min(Math.max(1,d),TOTAL); updateHeader(); loadAll() }
  function clearDay(){ fields.forEach(function(id){ localStorage.removeItem(key(id)) }); loadAll() }
  function duplicatePrev(){
    if(day<=1) return;
    fields.forEach(function(id){
      var v=localStorage.getItem("illumina2_day_"+(day-1)+"_"+id)||"";
      if(id==="dayDate" && v===""){ v=dates[day-1]; }
      localStorage.setItem(key(id), v);
    });
    loadAll();
  }
  function hookKeys(){
    document.addEventListener("keydown",function(e){
      var tag=e.target.tagName; if(tag==="TEXTAREA"||tag==="INPUT") return;
      if(e.key==="ArrowLeft") goTo(day-1);
      if(e.key==="ArrowRight") goTo(day+1);
    });
  }

  populatePicker(); bindSave(); goTo(1); hookKeys();

  qs("prev").onclick=function(){ goTo(day-1) };
  qs("next").onclick=function(){ goTo(day+1) };
  qs("picker").onchange=function(){ goTo(parseInt(this.value,10)) };
  qs("print").onclick=function(){ window.print() };
  qs("clearDay").onclick=clearDay;
  qs("duplicatePrev").onclick=duplicatePrev;
})();
</script>
</body>
</html>
