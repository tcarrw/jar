<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Jar · Illumina Journal · PLNT Earth</title>
<meta name="description" content="Jar is the temporal hub for Illumina — a 42-day journal cycle anchored to the full moon. Each square is a day. Some are empty by design." />
<meta name="theme-color" content="#0b0d11" />

<style>
:root{
  color-scheme: dark;
  --bg:#0b0d11;
  --ink:#e9f0ff;
  --muted:#a9b4c9;
  --edge:#1b2230;
  --panel:#101423;
  --ring:#222a3a;
  --accent:#8ef;
}

html,body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font-family:system-ui,-apple-system,"SF Pro Text",Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}

*{box-sizing:border-box}

/* ===== Nav ===== */
nav{
  display:flex;
  gap:14px;
  padding:12px 16px;
  border-bottom:1px solid var(--edge);
  background:rgba(11,13,17,.9);
  position:sticky;
  top:0;
  z-index:10;
}
nav a{
  color:var(--muted);
  text-decoration:none;
  font-weight:600;
}
nav a.active{color:var(--ink)}

/* ===== Layout ===== */
.wrap{
  max-width:1100px;
  margin:0 auto;
  padding:18px 16px 96px;
}

header{
  margin-bottom:18px;
}
header h1{
  margin:0;
  font-size:clamp(22px,4vw,34px);
}
header .sub{
  color:var(--muted);
  margin-top:4px;
}

/* ===== Illumina State ===== */
.state{
  display:flex;
  flex-wrap:wrap;
  gap:14px;
  margin:18px 0 22px;
}
.badge{
  border:1px solid var(--edge);
  border-radius:999px;
  padding:6px 12px;
  font-weight:600;
  background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(0,0,0,.12));
}

/* ===== Grid ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:10px;
}

.band{
  grid-column:1 / -1;
  margin:14px 0 6px;
  font-weight:700;
  letter-spacing:.08em;
  color:var(--muted);
}

.cell{
  position:relative;
  aspect-ratio:1/1;
  border-radius:14px;
  border:1px solid var(--edge);
  background:rgba(255,255,255,.04);
  display:flex;
  align-items:flex-end;
  padding:8px;
  font-weight:700;
  cursor:pointer;
  overflow:hidden;
}

.cell span{
  position:relative;
  z-index:2;
}

.cell.today{
  outline:2px solid var(--accent);
  outline-offset:2px;
}

.cell.future{
  cursor:default;
}

.cell.future::after{
  content:"";
  position:absolute;
  inset:0;
  backdrop-filter:blur(6px);
  background:rgba(255,255,255,.06);
  z-index:1;
}

/* ===== Footer ===== */
footer{
  border-top:1px solid var(--edge);
  padding:18px 16px;
  color:var(--muted);
  text-align:center;
}
footer a{
  color:var(--muted);
  text-decoration:none;
  margin:0 6px;
}
</style>
</head>

<body>

<nav>
  <a href="https://earth.plnt.earth">Earth</a>
  <a href="https://map.plnt.earth">Map</a>
  <a href="https://time.plnt.earth">Time</a>
  <a href="https://jar.plnt.earth" class="active">Jar</a>
  <a href="https://honey.plnt.earth">Honey</a>
  <a href="https://bejeweled.plnt.earth">Bejeweled</a>
  <a href="https://mirrorhoney.plnt.earth">Mirror Honey</a>
</nav>

<div class="wrap">

<header>
  <h1>Jar · Illumina Journal</h1>
  <div class="sub">Illumina 1 · 42-day cycle anchored to the Nov 5, 2025 full moon</div>
</header>

<div class="state" id="state"></div>

<div class="grid" id="grid"></div>

</div>

<footer>
  PLNT Earth · Illumina is a 42-day cycle of preparation and execution ·
  <a href="https://earth.plnt.earth">Earth</a>
  <a href="https://map.plnt.earth">Map</a>
  <a href="https://time.plnt.earth">Time</a>
  <a href="https://jar.plnt.earth">Jar</a>
</footer>

<script>
(function(){
  const FULL_MOON = new Date("2025-11-05T08:19:00-05:00");
  const LUNAR = 29.530588;
  const TOTAL_DAYS = 42;

  const today = new Date();
  const msPerDay = 86400000;

  function illumination(days){
    const phase = ((days / LUNAR) % 1 + 1) % 1;
    return 0.5 * (1 + Math.cos(2 * Math.PI * phase));
  }

  const grid = document.getElementById("grid");
  const state = document.getElementById("state");

  const daysSince = Math.floor((today - FULL_MOON) / msPerDay);
  const currentIndex = Math.min(Math.max(daysSince,0), TOTAL_DAYS-1);

  state.innerHTML = `
    <div class="badge">Illumina 1</div>
    <div class="badge">Day ${Math.floor(currentIndex/7)+1}:${currentIndex%7+1}</div>
    <div class="badge">${today.toDateString()}</div>
  `;

  for(let i=0;i<TOTAL_DAYS;i++){
    if(i===0) grid.insertAdjacentHTML("beforeend",`<div class="band">PREPARE · Days 1–14</div>`);
    if(i===14) grid.insertAdjacentHTML("beforeend",`<div class="band">BUILD · Days 15–28</div>`);
    if(i===28) grid.insertAdjacentHTML("beforeend",`<div class="band">COMPLETE · Days 29–42</div>`);

    const dayDate = new Date(FULL_MOON.getTime() + i*msPerDay);
    const illum = illumination(i);
    const bg = `rgba(255,255,255,${0.08 + illum*0.25})`;

    const cell = document.createElement("div");
    cell.className = "cell";
    cell.style.background = bg;
    cell.innerHTML = `<span>Illumina 1 · ${Math.floor(i/7)+1}:${i%7+1}</span>`;

    if(i === currentIndex) cell.classList.add("today");
    if(i > currentIndex) cell.classList.add("future");
    if(i <= currentIndex){
      cell.addEventListener("click",()=>location.href=`/day/${Math.floor(i/7)+1}-${i%7+1}.html`);
    }

    grid.appendChild(cell);
  }
})();
</script>

</body>
</html>
