<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>PLNT ¬∑ Jar</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ctext y='50' x='6' font-size='48'%3Eüåï%3C/text%3E%3C/svg%3E">
<meta name="color-scheme" content="dark light">
<style>
  :root{
    --pepper:#0a0b0c; --char:#101214; --ink:#f1f2f3; --muted:#8e98a3;
    --line: color-mix(in oklab, var(--ink) 12%, transparent);
    --ring: color-mix(in oklab, var(--ink) 18%, transparent);
    --accent:#c3e8ff; --ok:#7ee787; --warn:#f5d97b; --no:#ff7b72;
    --rad:16px; --pad:16px;
  }
  @media (prefers-color-scheme: light){
    :root{ --pepper:#fafafa; --char:#ffffff; --ink:#0b0d10; --muted:#596272;
      --line: color-mix(in oklab, var(--ink) 16%, transparent);
      --ring: color-mix(in oklab, var(--ink) 22%, transparent);
      --accent:#144d7a;
    }
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:var(--pepper); color:var(--ink);
    font:500 15px/1.45 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, Helvetica, Arial;
  }
  /* header */
  .sitebar{position:sticky; top:0; z-index:10; background:linear-gradient(180deg, color-mix(in oklab,var(--char) 92%, transparent), var(--char)); border-bottom:1px solid var(--line); padding:10px 16px}
  .nav{max-width:1120px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; gap:12px}
  .brand{display:flex; align-items:center; gap:10px; font-weight:800}
  .dot{inline-size:9px; block-size:9px; border-radius:50%; background:#6cf; box-shadow:0 0 22px #6cf}
  .links{display:flex; gap:10px; flex-wrap:wrap}
  .link{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; border:1px solid var(--ring); background:var(--char); color:var(--ink); text-decoration:none; font-weight:600}
  .link[aria-current="page"]{outline:2px solid var(--accent); outline-offset:2px}
  .controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
  button, .selectlike{
    border:1px solid var(--ring); background:var(--char); color:var(--ink);
    border-radius:12px; padding:10px 12px; font-weight:600;
  }
  button[data-on="1"]{outline:2px solid var(--accent)}

  main{max-width:1120px; margin:18px auto 28px; padding:0 16px; display:grid; gap:16px}

  /* jar stage */
  .stage{
    position:relative; isolation:isolate;
    background:radial-gradient(120% 140% at 70% 10%, color-mix(in oklab, #6cf 6%, transparent), transparent 60%),
               radial-gradient(120% 140% at 20% 90%, color-mix(in oklab, #ffd58a 8%, transparent), transparent 60%);
    border:1px solid var(--line); border-radius:var(--rad); min-height:64vh; overflow:hidden;
  }
  .hud{position:absolute; inset:auto 12px 12px auto; display:flex; gap:8px; flex-wrap:wrap; z-index:3}
  .badge{padding:6px 10px; border-radius:999px; border:1px solid var(--line); background:var(--char); color:var(--muted); font-size:12px}

  /* jar svg */
  .jar{
    position:absolute; inset:0; display:grid; place-items:center;
  }
  svg{width:min(82vmin, 980px); height:auto; display:block; filter:drop-shadow(0 10px 30px rgba(0,0,0,.25))}
  .glass{fill:transparent; stroke:color-mix(in oklab, var(--ink) 35%, transparent); stroke-width:3}
  .honey{
    fill:url(#honeyGrad);
    opacity:.22;
  }
  .honeyWave{
    transform-origin:50% 50%;
    animation: slosh 11s ease-in-out infinite;
  }
  @keyframes slosh{
    0%{ transform: translateY(0) rotate(0.2deg) }
    50%{ transform: translateY(-3px) rotate(-0.2deg) }
    100%{ transform: translateY(0) rotate(0.2deg) }
  }

  /* seeds (floating dots) */
  .seeds{position:absolute; inset:10% 0 8% 0; margin:auto; width:min(82vmin, 980px); height:calc(min(82vmin,980px)*1.2); pointer-events:none; z-index:2}
  .seed{
    position:absolute; inline-size:8px; block-size:8px; border-radius:50%;
    background:color-mix(in oklab, #ffd58a 85%, transparent);
    box-shadow:0 0 10px rgba(255, 213, 138, .4);
    opacity:.7;
    animation: floatUp linear infinite;
  }
  @keyframes floatUp{
    0%{ transform: translateY(40vh) translateX(0) scale(1); opacity:0 }
    10%{ opacity:.85 }
    90%{ opacity:.85 }
    100%{ transform: translateY(-36vh) translateX(var(--dx, 0px)) scale(.9); opacity:0 }
  }

  .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
  .card{background:var(--char); border:1px solid var(--line); border-radius:var(--rad); padding:var(--pad)}
  .hint{color:var(--muted); font-size:12px}

  /* mode theming */
  [data-mode="honey"] .dot{background:#ffcd66; box-shadow:0 0 22px #ffcd66}
  [data-mode="honey"] .stage{background:radial-gradient(120% 140% at 70% 10%, color-mix(in oklab, #ffcd66 14%, transparent), transparent 60%),
                                      radial-gradient(120% 140% at 20% 90%, color-mix(in oklab, #a36d00 10%, transparent), transparent 60%)}
  [data-mode="neon"]  .stage{background:radial-gradient(120% 140% at 70% 10%, color-mix(in oklab, #6cf 16%, transparent), transparent 60%),
                                      radial-gradient(120% 140% at 20% 90%, color-mix(in oklab, #9ddcff 10%, transparent), transparent 60%)}

  /* footer */
  footer{border-top:1px solid var(--line); padding:14px 16px; color:var(--muted)}
  .foot{max-width:1120px; margin:0 auto; display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap}
</style>
</head>
<body data-mode="neon">
  <!-- Header -->
  <div class="sitebar">
    <nav class="nav" aria-label="Primary">
      <div class="brand"><span class="dot"></span><span>PLNT ¬∑ Jar</span></div>
      <div class="links">
        <a class="link" href="/">Home</a>
        <a class="link" href="/pairs/">Pairs</a>
        <a class="link" href="/#playlists">Tunes</a>
        <a class="link" aria-current="page" href="/jar/">Jar</a>
      </div>
      <div class="controls">
        <button id="neon" data-on="1" aria-pressed="true">Neon</button>
        <button id="honey" aria-pressed="false">Honey</button>
        <button id="hum" aria-pressed="false">Hum</button>
        <button id="sleep" aria-pressed="false" title="Pause visuals (S)">Sleep</button>
      </div>
    </nav>
  </div>

  <main>
    <!-- Screensaver Stage -->
    <section class="stage" id="stage" aria-label="Animated jar screensaver">
      <div class="hud">
        <span class="badge">Tip: press <strong>S</strong> to pause, <strong>H</strong> to hush</span>
        <span class="badge">Mode: <span id="modeLabel">Neon</span></span>
      </div>

      <div class="jar" aria-hidden="true">
        <svg viewBox="0 0 420 560" role="img" aria-label="Glass jar">
          <defs>
            <linearGradient id="honeyGrad" x1="0" x2="0" y1="0" y2="1">
              <stop offset="0%"  stop-color="#ffd58a"/>
              <stop offset="100%" stop-color="#c98800"/>
            </linearGradient>
            <clipPath id="jarClip">
              <!-- simple jar silhouette -->
              <path d="
                M100,60
                h220
                a16,16 0 0 1 16,16
                v32
                h14
                a24,24 0 0 1 24,24
                v330
                a28,28 0 0 1 -28,28
                H90
                a28,28 0 0 1 -28,-28
                V132
                a24,24 0 0 1 24,-24
                h14
                V76
                a16,16 0 0 1 16,-16
                z" />
            </clipPath>
          </defs>

          <!-- glass rim -->
          <rect x="88" y="60" width="244" height="48" rx="12" class="glass"/>
          <!-- jar body outline -->
          <path class="glass" d="
            M100,108
            h220
            a24,24 0 0 1 24,24
            v330
            a28,28 0 0 1 -28,28
            H90
            a28,28 0 0 1 -28,-28
            V132
            a24,24 0 0 1 24,-24
            z" />

          <!-- honey fill -->
          <g clip-path="url(#jarClip)">
            <rect x="70" y="180" width="290" height="240" class="honey"/>
            <!-- waves -->
            <ellipse cx="210" cy="180" rx="150" ry="18" fill="#000" opacity=".06" class="honeyWave"/>
            <ellipse cx="210" cy="184" rx="160" ry="14" fill="#000" opacity=".05" class="honeyWave" style="animation-direction:reverse; animation-duration:13s"/>
          </g>
        </svg>
      </div>

      <!-- floating seeds -->
      <div class="seeds" id="seeds"></div>
    </section>

    <!-- Links / Safety -->
    <section class="card">
      <div class="row" style="justify-content:space-between">
        <h2 style="margin:0">Inside the Jar</h2>
        <div class="row">
          <a class="link" href="/#playlists" title="Go to Tunes playlists">Taste (Sabrina) ‚Üí Tunes</a>
          <a class="link" href="/pairs/" title="Open pairing tester">Pairs & Tester</a>
        </div>
      </div>
      <p class="hint">The Jar is a calm ‚Äúwalled garden‚Äù view. Toggle Neon/Honey to shift feel; use Hum for a low ambient tone.</p>
    </section>

    <section class="card">
      <h3 style="margin:0 0 8px">Silica & General Care</h3>
      <ul style="margin:0 0 8px 18px">
        <li>Keep <strong>silica desiccant</strong> packets sealed and away from children & pets.</li>
        <li>Do <strong>not</strong> open, cut, heat, or inhale dust from packets; avoid eye contact.</li>
        <li>If dust contacts skin or eyes, rinse with water. If swallowed, seek guidance from a medical professional.</li>
        <li>Do not store food or honey with <em>loose</em> silica granules; only use intact labeled packets nearby to reduce moisture.</li>
        <li>This site is informational only ‚Äî not medical advice.</li>
      </ul>
      <p class="hint">Emergency keys: <strong>H</strong> = hush audio ¬∑ <strong>S</strong> = pause visuals</p>
    </section>
  </main>

  <footer>
    <div class="foot">
      <div>PLNT ¬∑ Jar ‚Äî pepper-black ‚Ä¢ low-CPU screensaver</div>
      <div class="hint">Neon/Honey modes ¬∑ optional hum ¬∑ safe-use reminders</div>
    </div>
  </footer>

<script>
/* ===== Mode & basic prefs ===== */
var body = document.body;
var neonBtn = document.getElementById("neon");
var honeyBtn = document.getElementById("honey");
var sleepBtn = document.getElementById("sleep");
var modeLabel = document.getElementById("modeLabel");

(function initMode(){
  var mode = localStorage.getItem("plnt_jar_mode") || "neon";
  applyMode(mode);
  neonBtn.addEventListener("click", function(){ applyMode("neon"); localStorage.setItem("plnt_jar_mode", "neon"); });
  honeyBtn.addEventListener("click", function(){ applyMode("honey"); localStorage.setItem("plnt_jar_mode", "honey"); });
  function applyMode(m){
    body.setAttribute("data-mode", m);
    neonBtn.dataset.on = m==="neon" ? "1" : "";
    neonBtn.setAttribute("aria-pressed", m==="neon");
    honeyBtn.dataset.on = m==="honey" ? "1" : "";
    honeyBtn.setAttribute("aria-pressed", m==="honey");
    modeLabel.textContent = m[0].toUpperCase()+m.slice(1);
  }
})();

/* ===== Floating seeds (lightweight) ===== */
var seedsWrap = document.getElementById("seeds");
(function seedField(){
  var count = 36; // modest for mobile
  var w = seedsWrap.clientWidth || 600;
  for(var i=0; i<count; i++){
    var s = document.createElement("span");
    s.className = "seed";
    var left = Math.random()* (w-20) + 10;
    var delay = (-Math.random()*8).toFixed(2);
    var dur = (14 + Math.random()*10).toFixed(2);
    s.style.left = left+"px";
    s.style.animationDuration = dur+"s";
    s.style.animationDelay = delay+"s";
    s.style.setProperty("--dx", (Math.random()*40-20)+"px");
    s.style.opacity = (0.55 + Math.random()*0.35).toFixed(2);
    seedsWrap.appendChild(s);
  }
})();

/* ===== Sleep (pause visuals) ===== */
var asleep = false;
function setSleep(on){
  asleep = !!on;
  sleepBtn.dataset.on = on ? "1" : "";
  sleepBtn.setAttribute("aria-pressed", on);
  var root = document.querySelector(".stage");
  root.style.animationPlayState = on ? "paused" : "running";
  document.querySelectorAll(".honeyWave,.seed").forEach(function(el){ el.style.animationPlayState = on ? "paused":"running"; });
}
sleepBtn.addEventListener("click", function(){ setSleep(!asleep); });

/* ===== Hum (Web Audio, user-initiated) ===== */
var humBtn = document.getElementById("hum");
var AC = window.AudioContext || window.webkitAudioContext;
var ctx, osc, gain, fil;
var humming = false;

function startHum(){
  if(humming) return;
  if(!AC) return; // no Web Audio support
  ctx = ctx || new AC();
  gain = ctx.createGain(); gain.gain.value = 0.015; // gentle
  fil = ctx.createBiquadFilter(); fil.type = "lowpass"; fil.frequency.value = 220;
  osc = ctx.createOscillator(); osc.type = "sine"; osc.frequency.value = 110; // warm A2
  osc.connect(fil); fil.connect(gain); gain.connect(ctx.destination);
  osc.start();
  humming = true;
  humBtn.dataset.on = "1"; humBtn.setAttribute("aria-pressed","true");
}
function stopHum(){
  if(!humming) return;
  try{ osc.stop(); }catch(e){}
  try{ osc.disconnect(); fil.disconnect(); gain.disconnect(); }catch(e){}
  humming = false;
  humBtn.dataset.on = ""; humBtn.setAttribute("aria-pressed","false");
}
humBtn.addEventListener("click", function(){
  if(!humming) startHum(); else stopHum();
});

/* ===== Keyboard shortcuts ===== */
document.addEventListener("keydown", function(ev){
  var k = ev.key.toLowerCase();
  if(k==="h"){ stopHum(); }
  if(k==="s"){ setSleep(!asleep); }
});

/* ===== iOS friendly: stop audio on page hide ===== */
document.addEventListener("visibilitychange", function(){
  if(document.hidden){ stopHum(); }
});
</script>
</body>
</html>
